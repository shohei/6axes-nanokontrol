<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title></title>
  </head>
  <body>
    <h1>JSON loader</h1>
    <div id="stage">
      <script src="jquery.js"></script> 
      <script src="./three.js"></script> 
      <script src="./TrackballControls.js"></script> 
      <script>
        (function() {
          $(function() {
            var animate, camera, controls, geo, height, light, mat, plane, radians, renderer, scene, width;
            radians = function(degree) {
              return degree * Math.PI / 180;
            };
            width = 1000;
            height = 800;
            scene = new THREE.Scene();
            new THREE.JSONLoader().load('slider.json', function(geometry, materials) {
              var geo, mat, mesh;
              geo = geometry;
              mat = new THREE.MeshFaceMaterial(materials);
              mesh = new THREE.Mesh(geo, mat);
              mesh.castShadow = true;
              mesh.scale.set(100, 100, 100);
              return scene.add(mesh);
            });
            geo = new THREE.PlaneGeometry(1500, 1500);
            mat = new THREE.MeshLambertMaterial({
              color: 0x0096d6,
              side: THREE.DoubleSide
            });
            plane = new THREE.Mesh(geo, mat);
            plane.receiveShadow = true;
            plane.position.set(0, -150, 0);
            plane.rotation.x = radians(90);
            scene.add(plane);
            scene.add(new THREE.AxisHelper(1000));
            light = new THREE.DirectionalLight(0xffffff, 1);
            light.castShadow = true;
            light.position.set(0, 100, 30);
            scene.add(light);
            scene.add(new THREE.AmbientLight(0x550000));
            camera = new THREE.PerspectiveCamera(45, width / height, 1, 1000);
            camera.position.set(2200, 2300, 2500);
            controls = new THREE.TrackballControls(camera);
            renderer = new THREE.WebGLRenderer();
            renderer.shadowMapEnabled = true;
            renderer.setSize(width, height);
            renderer.setClearColor(0xeeeeee, 1);
            $('#stage').append(renderer.domElement);
            animate = function() {
              requestAnimationFrame(animate);
              renderer.render(scene, camera);
              return controls.update();
            };
            return animate();
          });
        }).call(this);
      </script>
    </div> 
  </body>
</html>
